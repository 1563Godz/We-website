<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>SnakeGame</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
</head>

<body>
  <div class="page">
    <div class="content">
      <div class="wrapper">
        <div class="game-details">
          <span class="score">Score: 0</span>
          <span class="high-score">High Score: 0</span>
        </div>
        <div class="play-board"></div>
        <div class="controls">
          <i data-key="ArrowLeft" class="fa-solid fa-arrow-left"></i>
          <i data-key="ArrowRight" class="fa-solid fa-arrow-right"></i>
          <i data-key="ArrowUp" class="fa-solid fa-arrow-up"></i>
          <i data-key="ArrowDown" class="fa-solid fa-arrow-down"></i>
        </div>
      </div>
      <div class="guide">
        <p>Use Arrow key to play or interact with arrow button on screen.</p>
      </div>
    </div>
  </div>
  <div class="back-home-container">
    <a href="/" class="back-home-btn">กลับหน้าหลัก</a>
  </div>

  <footer class="footer">Snake Game project, made by Aimview & Catchi</footer>
</body>

</html>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Bitcount+Grid+Single:wght@100..900&family=Bitcount+Prop+Single:wght@100..900&display=swap');

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Bitcount Prop Single', serif;
  }

  html,
  body {
    height: 100%;
    margin: 0;
    padding: 0;
  }

  body {
    display: flex;
    flex-direction: column;
    background: #173326;
    font-family: 'Bitcount Prop Single', serif;

  }

  .page {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }

  .wrapper {
    width: 90vw;
    max-width: 65vmin;
    height: 90vw;
    max-height: 75vmin;
    border-radius: 5px;
    background: #101b2e;
    margin: auto;
    display: flex;
    flex-direction: column;
  }

  .game-details {
    color: #e6ad58;
    font-size: 1.2rem;
    font-weight: 500;
    padding: 20px 27px;
    display: flex;
    justify-content: space-between;

  }

  .play-board {
    width: 100%;
    height: 100%;
    display: grid;
    grid-template: repeat(30, 1fr) / repeat(30, 1fr);
    background: #181e27;
    aspect-ratio: 1/1;
    max-width: 100vw;
    max-height: 100vw;
    min-width: 200px;
    min-height: 200px;
  }
  @media (max-width: 600px) {
    .wrapper {
      width: 75vw;
      height: 90vw;
      max-width: 100vw;
      max-height: 100vw;
    }
    .play-board {
      min-width: 150px;
      min-height: 150px;
      max-width: 98vw;
      max-height: 98vw;
    }
    .game-details {
      font-size: 1rem;
      padding: 10px 10px;
    }
    .controls i {
      font-size: 1.1rem;
      padding: 15px 0;
    }
    .guide {
      font-size: 0.95rem;
      padding: 7px 6px;
    }
  }

  .play-board .food {
    background: #cea242;
  }

  .play-board .head {
    background: #177e28;
  }

  .controls {
    display: flex;
    justify-content: space-between;

  }

  .controls i {
    padding: 25px 0;
    color: #cea242;
    text-align: center;
    cursor: pointer;
    font-size: 1.3rem;
    width: calc(100%/4);
    border-right: 1px solid #173326;
  }

  .footer {
    background-color: #c59c43;
    text-align: center;
    padding: 10px;
    color: #09250d;
  }

  .guide {
    font-size: 1.1rem;
    margin-top: 20px;
    background: #101b2e;
    border-radius: 5px;
    padding: 10px 12px;
    color: #637566;
    text-align: center;
 }

 .back-home-container {
   position: fixed;
   right: 32px;
   bottom: 32px;
   margin: 0;
   z-index: 1000;
   text-align: right;
 }

 .back-home-btn {
   display: inline-block;
   background: #cea242;
   color: #173326;
   font-weight: bold;
   padding: 10px 28px;
   border-radius: 6px;
   text-decoration: none;
   font-size: 1.1rem;
   box-shadow: 0 2px 8px rgba(0,0,0,0.08);
   transition: background 0.2s;
 }
 .back-home-btn:hover, .back-home-btn:focus {
   background: #e6ad58;
  }
</style>

<script>
  const playBoard = document.querySelector(".play-board");
  const scoreElement = document.querySelector(".score");
  const highScoreElement = document.querySelector(".high-score");
  const controls = document.querySelectorAll(".controls i");

  let gameOver = false;
  let foodX, foodY;
  let snakeX = 5, snakeY = 10;
  let snakeBody = [];
  let velocityX = 0, velocityY = 0;
  let lastMoveTime = 0;
  let moveDelay = 125; // ms
  let score = 0;

  let highScore = localStorage.getItem("high-score") || 0;
  highScoreElement.innerText = `High Score: ${highScore}`;

  const changeFoodPosition = () => {
    foodX = Math.floor(Math.random() * 30) + 1;
    foodY = Math.floor(Math.random() * 30) + 1;
  };

  const handleGameOver = () => {
    alert("Game Over! Press OK to replay...");
    location.reload();
  };

  const changeDirection = (e) => {
    if (e.key === "ArrowUp" && velocityY != 1) {
      velocityX = 0;
      velocityY = -1;
    } else if (e.key === "ArrowDown" && velocityY != -1) {
      velocityX = 0;
      velocityY = 1;
    } else if (e.key === "ArrowLeft" && velocityX != 1) {
      velocityX = -1;
      velocityY = 0;
    } else if (e.key === "ArrowRight" && velocityX != -1) {
      velocityX = 1;
      velocityY = 0;
    }
  };

  controls.forEach(key => {
    key.addEventListener("click", () => changeDirection({ key: key.dataset.key }));
  });

  function drawGame() {
    let htmlMarkup = `<div class="food" style="grid-area: ${foodY} / ${foodX}"></div>`;
    for (let i = 0; i < snakeBody.length; i++) {
      htmlMarkup += `<div class="head" style="grid-area: ${snakeBody[i][1]} / ${snakeBody[i][0]}"></div>`;
    }
    playBoard.innerHTML = htmlMarkup;
  }

  function moveSnake() {
    if (gameOver) return;
    if (snakeX === foodX && snakeY === foodY) {
      changeFoodPosition();
      snakeBody.push([foodX, foodY]);
      score++;
      highScore = score >= highScore ? score : highScore;
      localStorage.setItem("high-score", highScore);
      scoreElement.innerText = `Score: ${score}`;
      highScoreElement.innerText = `High Score: ${highScore}`;
    }
    for (let i = snakeBody.length - 1; i > 0; i--) {
      snakeBody[i] = snakeBody[i - 1];
    }
    snakeBody[0] = [snakeX, snakeY];
    snakeX += velocityX;
    snakeY += velocityY;
    if (snakeX <= 0 || snakeX > 30 || snakeY <= 0 || snakeY > 30) {
      gameOver = true;
    }
    for (let i = 1; i < snakeBody.length; i++) {
      if (snakeBody[0][1] === snakeBody[i][1] && snakeBody[0][0] === snakeBody[i][0]) {
        gameOver = true;
      }
    }
    if (gameOver) handleGameOver();
  }

  function gameLoop(timestamp) {
    if (!lastMoveTime) lastMoveTime = timestamp;
    if (timestamp - lastMoveTime > moveDelay) {
      moveSnake();
      lastMoveTime = timestamp;
    }
    drawGame();
    if (!gameOver) {
      requestAnimationFrame(gameLoop);
    }
  }

  changeFoodPosition();
  document.addEventListener("keydown", changeDirection);
  requestAnimationFrame(gameLoop);
</script>